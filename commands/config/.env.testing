# Testing Environment Override
# Source: .env.unified + testing-specific settings

# === CORE TESTING SETTINGS ===
DEPLOYMENT_ENV=testing
FLASK_ENV=testing
DEBUG=true

# === PORTS (Different from dev/prod to avoid conflicts) ===
EXTERNAL_PORT=12542
INTERNAL_PORT=2542
REDIS_EXTERNAL_PORT=16379
POSTGRES_EXTERNAL_PORT=15432
PROMETHEUS_PORT=19090
GRAFANA_PORT=13000

# === COLLECTION SETTINGS (Disabled for testing safety) ===
COLLECTION_ENABLED=false
FORCE_DISABLE_COLLECTION=true
RESTART_PROTECTION=true
AUTO_EXTRACT_COOKIES=false

# === PERFORMANCE (Minimal for testing) ===
GUNICORN_WORKERS=1
GUNICORN_THREADS=1
DATABASE_POOL_SIZE=3
DATABASE_MAX_OVERFLOW=5
REDIS_MAXMEMORY=128mb

# === LOGGING (Error-only for clean test output) ===
LOG_LEVEL=ERROR
WATCHTOWER_DEBUG=false
WATCHTOWER_LOG_LEVEL=error

# === SECURITY (Relaxed for testing) ===
MAX_AUTH_ATTEMPTS=10
BLOCK_DURATION_HOURS=0.1
RATE_LIMIT_ENABLED=false

# === RESOURCE LIMITS (Minimal for testing) ===
CPU_LIMIT=0.25
MEMORY_LIMIT=256M
REDIS_CPU_LIMIT=0.125
REDIS_MEMORY_LIMIT=128M
POSTGRES_CPU_LIMIT=0.25
POSTGRES_MEMORY_LIMIT=256M

# === VOLUME PATHS (Test-specific paths) ===
DATA_PATH=./test-data/blacklist
LOGS_PATH=./test-logs
REDIS_DATA_PATH=./test-data/redis
POSTGRES_DATA_PATH=./test-data/postgresql

# === MONITORING (Disabled for testing) ===
PROMETHEUS_ENABLED=false
ENABLE_METRICS=false

# === TEST CREDENTIALS (Safe for testing) ===
SECRET_KEY=test-secret-key-not-secure
JWT_SECRET_KEY=test-jwt-secret-not-secure
POSTGRES_PASSWORD=test_password
ADMIN_PASSWORD=test_admin
DEFAULT_API_KEY=blk_test_key_123

# === TEST DATABASE (In-memory for speed) ===
POSTGRES_DB=blacklist_test
POSTGRES_USER=test_user