{
  "analysis_timestamp": "2025-06-23",
  "analysis_summary": "Complete analysis of document folder containing REGTECH and SECUDIUM API patterns",
  
  "regtech_patterns": {
    "base_url": "https://regtech.fsec.or.kr",
    "key_endpoints": {
      "authentication": {
        "url": "/member/authResourceCheck",
        "method": "POST",
        "content_type": "application/x-www-form-urlencoded; charset=UTF-8",
        "purpose": "Session authentication check"
      },
      "excel_download": {
        "url": "/fcti/securityAdvisory/advisoryListDownloadXlsx",
        "method": "POST",
        "content_type": "application/x-www-form-urlencoded",
        "purpose": "Excel download for blacklist data",
        "key_form_params": {
          "page": "0",
          "tabSort": "blacklist",
          "excelDownload": "security,blacklist,weakpoint,",
          "excelDown": "blacklist",
          "startDate": "YYYYMMDD",
          "endDate": "YYYYMMDD",
          "findCondition": "all",
          "size": "5000"
        }
      },
      "blacklist_view": {
        "url": "/fcti/securityAdvisory/blackListView",
        "method": "POST",
        "content_type": "application/x-www-form-urlencoded",
        "purpose": "HTML blacklist page view"
      },
      "advisory_list": {
        "url": "/fcti/securityAdvisory/advisoryList",
        "method": "GET",
        "purpose": "Main advisory list page"
      }
    },
    "standard_headers": {
      "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36",
      "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
      "sec-ch-ua": "\"Google Chrome\";v=\"131\", \"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"",
      "sec-ch-ua-mobile": "?0",
      "sec-ch-ua-platform": "\"Windows\"",
      "Sec-Fetch-Dest": "document",
      "Sec-Fetch-Mode": "navigate",
      "Sec-Fetch-Site": "same-origin",
      "Sec-Fetch-User": "?1",
      "Upgrade-Insecure-Requests": "1"
    },
    "ajax_headers": {
      "Accept": "application/json, text/javascript, */*; q=0.01",
      "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
      "X-Requested-With": "XMLHttpRequest",
      "Sec-Fetch-Dest": "empty",
      "Sec-Fetch-Mode": "cors"
    }
  },

  "secudium_patterns": {
    "base_url": "https://secudium.skinfosec.co.kr",
    "key_endpoints": {
      "login": {
        "url": "/isap-api/loginProcess",
        "method": "POST",
        "content_type": "application/x-www-form-urlencoded; charset=UTF-8",
        "purpose": "User authentication",
        "form_params": {
          "lang": "ko",
          "is_otp": "N",
          "login_name": "username",
          "password": "password",
          "otp_value": ""
        }
      },
      "auth_token_usage": {
        "header_name": "X-Auth-Token",
        "token_format": "nextrade:3150388763290800:26baaa47ab7aa8804c841f90d5b76811befc45433227a1dd9d8387d0d1a6829c",
        "usage": "Used in both URL query parameter and request header"
      },
      "blacklist_data": {
        "list_endpoint": "/isap-api/secinfo/list/ictiboard",
        "view_endpoint": "/secinfo/black_ip",
        "file_endpoint": "/isap-api/file/SECINFO/hasFile",
        "query_params": {
          "sdate": "",
          "edate": "",
          "dateKey": "i.reg_date",
          "count": "100",
          "filter": ""
        }
      },
      "file_download": {
        "endpoint": "/isap-api/file/SECINFO/hasFile",
        "params": {
          "serverFileName": "UUID format",
          "fileName": "Excel file name (URL encoded)"
        },
        "sample_file": "25년 06월 Blacklist 현황.xls"
      }
    },
    "standard_headers": {
      "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36",
      "Accept": "*/*",
      "Content-Type": "application/json; charset=utf-8",
      "sec-ch-ua": "\"Google Chrome\";v=\"131\", \"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"",
      "sec-ch-ua-mobile": "?0",
      "sec-ch-ua-platform": "\"Windows\"",
      "Sec-Fetch-Dest": "empty",
      "Sec-Fetch-Mode": "cors",
      "Sec-Fetch-Site": "same-origin",
      "X-Requested-With": "XMLHttpRequest"
    }
  },

  "har_file_analysis": {
    "regtech_har": {
      "file_path": "/home/jclee/dev/blacklist/document/regtech/regtech.fsec.or.kr/regtech.fsec.or.kr.har",
      "contains_session_data": true,
      "key_insights": "Contains actual browser request/response patterns with session management"
    },
    "secudium_har": {
      "file_path": "/home/jclee/dev/blacklist/document/secudium/secudium.skinfosec.co.kr.har",
      "contains_login_flow": true,
      "key_insights": "Contains complete login flow and authentication token generation"
    }
  },

  "existing_implementations": {
    "regtech_har_collector": {
      "file_path": "/home/jclee/dev/blacklist/scripts/collection/regtech_har_collector.py",
      "status": "Already implemented with HAR-based patterns",
      "compatibility": "Matches document patterns perfectly",
      "key_features": [
        "Excel download endpoint usage",
        "Proper form data structure",
        "Chrome browser headers",
        "Date range parameters"
      ]
    },
    "core_collectors": {
      "regtech_collector": "/home/jclee/dev/blacklist/src/core/regtech_collector.py",
      "secudium_collector": "/home/jclee/dev/blacklist/src/core/secudium_collector.py",
      "collection_manager": "/home/jclee/dev/blacklist/src/core/collection_manager.py"
    }
  },

  "authentication_patterns": {
    "regtech": {
      "type": "Session-based",
      "flow": "Main page -> authResourceCheck -> Access protected resources",
      "session_management": "Cookies and session state maintained"
    },
    "secudium": {
      "type": "Token-based",
      "flow": "Login -> Receive X-Auth-Token -> Use token in subsequent requests",
      "token_format": "username:timestamp:hash",
      "token_usage": "Both header and query parameter"
    }
  },

  "data_structures": {
    "regtech_blacklist": {
      "format": "Excel file (.xlsx)",
      "contains": ["IP addresses", "Countries", "Detection reasons", "Dates"],
      "sample_data": "3.138.185.30 (US) - Namo CrossEditor 정보 노출 탐지"
    },
    "secudium_blacklist": {
      "format": "Excel file (.xls) and JSON API",
      "contains": ["IP addresses", "Detection dates", "Sources", "File attachments"],
      "sample_file": "25년 06월 Blacklist 현황.xls"
    }
  },

  "implementation_recommendations": {
    "immediate_actions": [
      "Integrate existing regtech_har_collector.py into core system",
      "Update secudium_collector.py with document-based login patterns",
      "Add X-Auth-Token management for SECUDIUM",
      "Implement Excel file downloading and parsing"
    ],
    "integration_points": [
      "container.py - Register new collectors",
      "collection_manager.py - Add trigger methods",
      "routes.py - Expose collection endpoints"
    ]
  },

  "security_considerations": {
    "regtech": {
      "requires_valid_credentials": true,
      "session_timeout": "Unknown",
      "rate_limiting": "Possible"
    },
    "secudium": {
      "requires_valid_credentials": true,
      "token_expiration": "Based on timestamp in token",
      "otp_support": "Available but not required (is_otp: N)"
    }
  }
}