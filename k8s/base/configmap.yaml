apiVersion: v1
kind: ConfigMap
metadata:
  name: blacklist-base-config
data:
  # Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Í∏∞Î≥∏ ÏÑ§Ï†ï
  app.conf: |
    # Flask Configuration
    FLASK_ENV=production
    PROPAGATE_EXCEPTIONS=True
    
    # Logging
    LOG_FORMAT=json
    LOG_LEVEL=info
    
    # Performance
    RESPONSE_TIMEOUT=30
    MAX_CONTENT_LENGTH=16777216
    
    # Security
    SESSION_COOKIE_SECURE=True
    SESSION_COOKIE_HTTPONLY=True
    SESSION_COOKIE_SAMESITE=Lax
    
    # üî¥ Collection Security (Ïô∏Î∂Ä Ïù∏Ï¶ù Ï∞®Îã®)
    FORCE_DISABLE_COLLECTION=true
    COLLECTION_ENABLED=false
    RESTART_PROTECTION=true
    MAX_AUTH_ATTEMPTS=10
    BLOCK_DURATION_HOURS=24
  
  # Gunicorn ÏÑ§Ï†ï
  gunicorn.conf.py: |
    import multiprocessing
    import os
    
    bind = f"0.0.0.0:{os.environ.get('PORT', '8541')}"
    workers = multiprocessing.cpu_count() * 2 + 1
    worker_class = "sync"
    worker_connections = 1000
    timeout = 120
    keepalive = 2
    
    # Î°úÍπÖ
    accesslog = "-"
    errorlog = "-"
    loglevel = os.environ.get('LOG_LEVEL', 'info')
    access_log_format = '%(h)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s" %(D)s'
    
    # ÌîÑÎ°úÏÑ∏Ïä§ Í¥ÄÎ¶¨
    max_requests = 1000
    max_requests_jitter = 50
    preload_app = True
    
    # ÏÑ±Îä• ÏµúÏ†ÅÌôî
    worker_tmp_dir = "/dev/shm"