apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: blacklist

resources:
- ../../base
- ingress.yaml
- redis.yaml

patchesStrategicMerge:
- deployment-patch.yaml
- service-patch.yaml
- hpa-patch.yaml

images:
- name: blacklist
  newName: registry.jclee.me/blacklist
  newTag: 1.0.3

configMapGenerator:
- literals:
  - NODE_ENV=production
  - LOG_LEVEL=info
  - FLASK_ENV=production
  - ENABLE_METRICS=true
  - REDIS_URL=redis://redis:6379/0
  - DATABASE_URL=sqlite:////app/data/blacklist.db
  - PORT=2541
  name: blacklist-config
