#!/bin/bash
# Watchtower ë¡œê·¸ í™•ì¸ ìŠ¤í¬ë¦½íŠ¸

echo "ğŸ” Watchtower ë¡œê·¸ í™•ì¸ ëª…ë ¹ì–´"
echo "================================"
echo ""
echo "ìš´ì˜ ì„œë²„ì—ì„œ ì‹¤í–‰:"
echo ""
echo "# 1. Watchtower ì»¨í…Œì´ë„ˆ í™•ì¸"
echo "docker ps | grep watchtower"
echo ""
echo "# 2. ìµœê·¼ 100ì¤„ ë¡œê·¸"
echo "docker logs watchtower --tail 100"
echo ""
echo "# 3. ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§"
echo "docker logs -f watchtower"
echo ""
echo "# 4. íŠ¹ì • ì´ë¯¸ì§€ ê´€ë ¨ ë¡œê·¸ë§Œ í•„í„°"
echo "docker logs watchtower --tail 200 | grep -E '(blacklist|192.168.50.215:1234|registry.jclee.me|Unable to find|Checking|Updated)'"
echo ""
echo "# 5. ì—ëŸ¬ ë¡œê·¸ë§Œ í™•ì¸"
echo "docker logs watchtower --tail 200 | grep -E '(error|Error|ERROR|failed|Failed|FAILED)'"
echo ""
echo "# 6. ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ ê´€ë ¨ ë¡œê·¸"
echo "docker logs watchtower --tail 200 | grep -E '(Pulling|pulling|Updated|updated|Found new|Stopping|Starting|Restarting)'"
echo ""
echo "# 7. íƒ€ì„ìŠ¤íƒ¬í”„ì™€ í•¨ê»˜ í™•ì¸"
echo "docker logs -t watchtower --tail 100"
echo ""
echo "# 8. Watchtower ì„¤ì • í™•ì¸"
echo "docker inspect watchtower | grep -A 20 Env"
echo ""
echo "# 9. í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ blacklist ì»¨í…Œì´ë„ˆ ì •ë³´"
echo "docker inspect blacklist-app | grep -E '(Image|Created|com.centurylinklabs.watchtower)'"
echo ""
echo "# 10. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì—°ê²° í…ŒìŠ¤íŠ¸"
echo "curl -I http://192.168.50.215:1234/v2/"
echo "curl -I http://registry.jclee.me/v2/"